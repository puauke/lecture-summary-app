# 🌐 Streamlit Cloud デプロイ手順

## ✅ 最終チェック完了

### 動作確認済み機能
- ✅ Google Gemini API（gemini-2.5-flash）連携
- ✅ 要約・まとめ生成
- ✅ Q&A機能
- ✅ カテゴリ削除・復元（30日間保持）
- ✅ キャンセル機能
- ✅ リアルタイム残り時間表示（10秒ごと更新）
- ✅ ファイル自動ソート（講義番号検出）
- ✅ 多言語対応（日本語/英語）
- ✅ セキュリティ対策（SSRF、ファイル検証）
- ✅ 高速化最適化済み

---

## 🚀 Streamlit Cloud へのデプロイ

### 📌 重要：Streamlit Cloudは**完全無料**で**自動HTTPS**対応です

### ステップ1: GitHubにプッシュ

```bash
cd lecture_summary_app

# Gitの状態確認
git status

# 変更をコミット
git add .
git commit -m "最終版：高速化・キャンセル機能・時間推定機能追加"

# GitHubにプッシュ
git push origin main
```

### ステップ2: Streamlit Cloudでデプロイ

1. **Streamlit Cloud にアクセス**
   - https://share.streamlit.io/
   - GitHubアカウントでサインイン

2. **新しいアプリをデプロイ**
   - 「New app」ボタンをクリック
   - Repository: `puauke/lecture-summary-app`
   - Branch: `main`
   - Main file path: `lecture_summary_app/app.py`

3. **環境変数を設定（オプション）**
   - 「Advanced settings」→「Secrets」
   - 以下を追加（共有環境では不要、ユーザーが自分のAPIキーを入力）:
   ```toml
   # 不要：各ユーザーが自分のAPIキーを入力するため
   ```

4. **デプロイ開始**
   - 「Deploy!」ボタンをクリック
   - 3～5分で自動デプロイ完了

### ステップ3: URLを取得して共有

デプロイ完了後、以下のようなHTTPS URLが生成されます：

```
https://puauke-lecture-summary-app-lecture-summary-appapp-xxxxx.streamlit.app
```

このURLを友達に共有すれば、誰でもブラウザからアクセスできます！

---

## 📱 使い方（共有版）

### 友達への案内

```
🧠 AI資料まとめくん
https://[あなたのStreamlit URL]

【使い方】
1. Google Gemini APIキーを取得（無料）
   → https://ai.google.dev/

2. アプリでAPIキーを入力

3. PDFファイルをアップロード

4. 自動で要約とまとめを生成！

【特徴】
✅ 完全無料（Gemini無料枠利用）
✅ HTTPS対応で安全
✅ 個人のAPIキーで動作（プライバシー保護）
✅ 複数ファイル統合対応
✅ リアルタイム処理状況表示
```

---

## 🔒 セキュリティとプライバシー

- **APIキーの保護**: ユーザーが入力したAPIキーはブラウザのセッション内のみで使用
- **データの非保存**: Streamlit Cloudはデータを永続保存しない
- **HTTPS通信**: 全ての通信は暗号化
- **オープンソース**: コードは全て公開（GitHub）

---

## 🛠️ ローカル起動方法

### Windows（VS Code自動起動）

ダブルクリックするだけ：
```
アプリ起動.bat
```

このバッチファイルは：
1. VS Codeをタスクバーで起動
2. Streamlitアプリを起動（http://localhost:8501）

### 手動起動

```bash
cd lecture_summary_app
streamlit run app.py --server.port 8501
```

---

## 📊 制限事項

### Google Gemini API 無料枠
- 毎分: 15リクエスト
- 毎日: 1500リクエスト
- 毎月: 150万トークン

### Streamlit Cloud 無料枠
- 1アプリ: 1GB RAM
- リソース: 共有CPU
- 制限: 同時接続数制限なし

---

## 🆘 トラブルシューティング

### デプロイエラー

**エラー: requirements.txtが見つからない**
```bash
# ファイルパスを確認
git ls-tree -r main --name-only | grep requirements.txt
```

**エラー: Module not found**
```bash
# requirements.txtを確認
cat lecture_summary_app/requirements.txt
```

### APIキーエラー

**エラー: 400 INVALID_ARGUMENT**
- APIキーが無効または期限切れ
- https://ai.google.dev/ で新しいキーを作成

**エラー: 429 RESOURCE_EXHAUSTED**
- レート制限超過
- 10秒待ってから再試行

---

## 📈 今後の改善案

- [ ] OpenAI ChatGPT対応の完全テスト
- [ ] バッチ処理機能（複数カテゴリ一括処理）
- [ ] エクスポート形式拡張（Word, PDF）
- [ ] 要約スタイルのカスタマイズ
- [ ] チーム共有機能

---

## 📞 サポート

問題が発生した場合：
1. GitHub Issues: https://github.com/puauke/lecture-summary-app/issues
2. ローカルログを確認: ターミナル出力

---

**開発**: GitHub Copilot 支援
**最終更新**: 2026年1月16日
